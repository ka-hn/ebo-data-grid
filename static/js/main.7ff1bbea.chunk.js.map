{"version":3,"sources":["components/ButtonSort.jsx","components/TableHeader.jsx","components/SearchBox.jsx","components/TableTop.jsx","components/TableRow.jsx","components/Table.jsx","containers/App.jsx","index.jsx"],"names":["uuidv1","require","ButtonSort","props","_this","Object","classCallCheck","this","_this$props","possibleConstructorReturn","getPrototypeOf","call","header","sort","state","changeSortDirection","bind","assertThisInitialized","updateSortSettings","_this$state","newSort","order","column","id","setState","_this$state2","color","react_default","a","createElement","role","key","className","onClick","label","display","xmlns","width","height","viewBox","version","d","stroke","fill","Component","TableHeader","headers","length","map","ButtonSort_ButtonSort","SearchBox","_ref","searchChange","placeholder","onChange","TableTop","title","settings","style","background","themecolor","components_SearchBox","TableRow","onRowClick","rowData","redirectMessage","message","concat","district","replace","address","link","window","parent","frames","postMessage","origin","completeaddress","type","Table","data","components_TableRow","App","onSearchChange","event","searchfield","target","value","onSortChange","b","prototype","hasOwnProperty","varA","toLowerCase","varB","comparison","THAT","addEventListener","Promise","resolve","reject","counter","CHECKFORVALUES","setInterval","rows","module_info","name","clearInterval","Error","then","eventdata","marker","markerid","trim","adress","postalnumber","postalrown","postaltown","tags","sbolink","eboTGMLOrigin","newSettings","filteredData","filter","object","JSON","stringify","includes","headertitle","components_TableTop","TableHeader_TableHeader","components_Table","ReactDOM","render","src_containers_App","document","getElementById"],"mappings":"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","file":"static/js/main.7ff1bbea.chunk.js","sourcesContent":["/* eslint-disable jsx-a11y/click-events-have-key-events */\n/* eslint-disable jsx-a11y/interactive-supports-focus */\nimport React, { Component } from 'react';\n\nconst uuidv1 = require('uuid/v1');\n\nexport default class ButtonSort extends Component {\n  constructor(props) {\n    super(props);\n\n    const { header, sort } = this.props;\n    this.state = {\n      header,\n      sort,\n    };\n    this.changeSortDirection = this.changeSortDirection.bind(this);\n  }\n\n  changeSortDirection() {\n    const { updateSortSettings } = this.props;\n    const { sort, header } = this.state;\n    const newSort = {\n      sort: {\n        order: sort.order === 'asc' ? 'desc' : 'asc',\n        column: header.id,\n      },\n    };\n    this.setState(newSort);\n    updateSortSettings(newSort);\n  }\n\n  render() {\n    const { sort, header } = this.state;\n    const color = header.id === sort.column ? '#304760' : '#e2e9ef';\n\n    return (\n      <div\n        role=\"button\"\n        key={uuidv1()}\n        className=\"th\"\n        onClick={this.changeSortDirection}\n      >\n        {header.label}\n        <div\n          className={\n            sort.order === 'desc' ? 'sortarrow rotate180' : 'sortarrow'\n          }\n        >\n          <svg\n            display=\"flex\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n            width=\"17\"\n            height=\"17\"\n            viewBox=\"0 0 36 36\"\n            version=\"1.1\"\n          >\n            <path d=\"M31.06,11,18,24.06,4.94,11Z\" stroke={color} fill={color} />\n          </svg>\n        </div>\n      </div>\n    );\n  }\n}\n","/* eslint-disable react/prop-types */\nimport React, { Component } from 'react';\nimport ButtonSort from './ButtonSort';\n\nconst uuidv1 = require('uuid/v1');\n\nexport default class TableHeader extends Component {\n  constructor(props) {\n    super(props);\n    const { headers } = this.props;\n    this.state = {\n      headers,\n    };\n  }\n\n  render() {\n    const { sort, updateSortSettings } = this.props;\n    const { headers } = this.state;\n    return !headers.length ? (\n      <h1>Loading</h1>\n    ) : (\n      <div key={uuidv1()} className=\"thead\">\n        <div className=\"tr\">\n          {headers.map(header => (\n            <ButtonSort\n              key={uuidv1()}\n              header={header}\n              sort={sort}\n              updateSortSettings={updateSortSettings}\n            />\n          ))}\n        </div>\n      </div>\n    );\n  }\n}\n","/* eslint-disable react/prop-types */\nimport React from 'react';\n\nconst SearchBox = ({ searchChange }) => {\n  return (\n    <div className=\"searchbox\">\n      <input\n        className=\"searchfield\"\n        placeholder=\"Sök\"\n        onChange={searchChange}\n      />\n    </div>\n  );\n};\n\nexport default SearchBox;\n","/* eslint-disable react/prop-types */\nimport React from 'react';\nimport SearchBox from './SearchBox';\n\nconst TableTop = ({ title, searchChange, settings }) => {\n  let style = {};\n  if (settings) {\n    style = {\n      background: settings.themecolor,\n    };\n  }\n\n  return (\n    <div className=\"tabletop\" style={style}>\n      <h2 className=\"project-title\">{title}</h2>\n      <SearchBox searchChange={searchChange} />\n    </div>\n  );\n};\n\nexport default TableTop;\n","/* eslint-disable jsx-a11y/no-static-element-interactions */\n/* eslint-disable jsx-a11y/click-events-have-key-events */\nimport React, { Component } from 'react';\n\nclass TableRow extends Component {\n  constructor(props) {\n    super(props);\n    const { rowData } = this.props;\n    this.state = {\n      rowData,\n    };\n  }\n\n  onRowClick = () => {\n    const { rowData } = this.state;\n    const redirectMessage = {\n      message: 'ebo.redirect',\n      header: `${rowData.district} - ${rowData.id.replace('FS', '')} - ${\n        rowData.address\n      } - ${rowData.title}`,\n      link: rowData.link,\n    };\n\n    window.parent.frames[1].postMessage(redirectMessage, rowData.origin);\n  };\n\n  render() {\n    const { rowData } = this.state;\n    return (\n      <div className=\"tr\" onClick={this.onRowClick}>\n        <div className=\"td\">{rowData.id}</div>\n        <div className=\"td\">{rowData.title}</div>\n        <div className=\"td\">{rowData.completeaddress}</div>\n        <div className=\"td\">{rowData.district}</div>\n        <div className=\"td\">{rowData.type}</div>\n      </div>\n    );\n  }\n}\n\nexport default TableRow;\n","import React from 'react';\nimport TableRow from './TableRow';\n\nconst uuidv1 = require('uuid/v1');\n\nconst Table = ({ data }) => {\n  return (\n    <div className=\"tbody\">\n      {data.map(rowData => {\n        return <TableRow key={uuidv1()} rowData={rowData} />;\n      })}\n    </div>\n  );\n};\n\nexport default Table;\n","import React, { Component } from 'react';\nimport './App.css';\nimport TableHeader from '../components/TableHeader';\nimport TableTop from '../components/TableTop';\nimport Table from '../components/Table';\n/* import TestData from '../dev/testdata-markers-sisab'; */\n\nclass App extends Component {\n  constructor() {\n    super();\n    this.state = {\n      headers: [],\n      data: [],\n      searchfield: '',\n      sort: { order: 'asc', column: 'id' },\n      settings: [],\n    };\n    this.updateSortSettings = this.updateSortSettings.bind(this);\n  }\n\n  componentDidMount() {\n    const THAT = this;\n\n    window.addEventListener('message', function messageListener(event) {\n      // Create promise to recieve data\n      const FETCHDATA = new Promise(function fetchData(resolve, reject) {\n        let counter = 0;\n        const CHECKFORVALUES = setInterval(function checkForvalues() {\n          const { data } = event;\n          // Check that data and headers exist\n          if (\n            data.headers.length &&\n            data.rows.length &&\n            data.module_info.name === 'ebo-data-grid'\n          ) {\n            resolve(data);\n            clearInterval(CHECKFORVALUES);\n          } else {\n            if (counter > 10) {\n              reject(new Error('No data was recieved for 10 seconds'));\n              clearInterval(CHECKFORVALUES);\n            }\n            counter += 1;\n          }\n        }, 1000);\n      });\n\n      FETCHDATA.then(eventdata => {\n        const data = eventdata.rows.map(marker => {\n          return {\n            id: marker.markerid.trim(),\n            title: marker.title.trim(),\n            address: marker.adress.trim(),\n            postalnumber: marker.postalnumber.trim(),\n            postalrown: marker.postaltown.trim(),\n            completeaddress: `${marker.adress.trim()}, ${marker.postalnumber.trim()}, ${marker.postaltown.trim()}`.trim(),\n            district: marker.tags[0].trim(),\n            type: marker.type.trim(),\n            link: marker.sbolink.trim(),\n            origin: eventdata.eboTGMLOrigin.trim(),\n          };\n        });\n\n        const headers = eventdata.headers.map(header => {\n          return { label: header.label, id: header.id };\n        });\n\n        const { settings } = eventdata.module_info;\n\n        THAT.setState({ headers, data, settings });\n      });\n    });\n  }\n\n  onSearchChange = event => {\n    this.setState({ searchfield: event.target.value });\n  };\n\n  onSortChange = () => {\n    const { sort } = this.state;\n    const { order } = sort;\n    const key = sort.column;\n\n    return function compare(a, b) {\n      if (\n        !Object.prototype.hasOwnProperty.call(a, key) ||\n        !Object.prototype.hasOwnProperty.call(b, key)\n      ) {\n        return 0;\n      }\n\n      const varA = typeof a[key] === 'string' ? a[key].toLowerCase() : a[key];\n      const varB = typeof b[key] === 'string' ? b[key].toLowerCase() : b[key];\n\n      let comparison = 0;\n      if (varA > varB) {\n        comparison = 1;\n      } else if (varA < varB) {\n        comparison = -1;\n      }\n      return order === 'desc' ? comparison * -1 : comparison;\n    };\n  };\n\n  updateSortSettings(newSettings) {\n    const { data } = this.state;\n    this.setState(newSettings);\n    data.sort(this.onSortChange());\n  }\n\n  render() {\n    let title = 'EBO Data Grid';\n    const { headers, data, searchfield, sort, settings } = this.state;\n    const sortedData = data.sort(this.onSortChange());\n    const filteredData = sortedData.filter(object => {\n      return JSON.stringify(object)\n        .toLowerCase()\n        .includes(searchfield.toLowerCase());\n    });\n\n    if (settings) {\n      title = settings.headertitle;\n    }\n\n    return !data.length ? (\n      <h1>Loading</h1>\n    ) : (\n      <div className=\"app\">\n        <TableTop\n          title={title}\n          searchChange={this.onSearchChange}\n          settings={settings}\n        />\n        <div className=\"table\">\n          <TableHeader\n            headers={headers}\n            sort={sort}\n            updateSortSettings={this.updateSortSettings}\n          />\n          <Table data={filteredData} />\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './containers/App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}